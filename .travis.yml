language: csharp
solution: SystemInteract.sln
mono:
  - latest
git:
  depth: 300

sudo: required
dist: trusty

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
    - nunit-console 
    - iptables-dev
    - realpath
    - libnl-3-dev
    - libnl-3-200
    - libnetfilter-conntrack3
    - libnfnetlink-dev
    - libnfnetlink0
    - libpcap0.8
    - libpcap0.8-dev

install:
  - sudo modprobe ip_conntrack
script:
  - bash travis-ci/autoversion.sh SystemInteract
  - bash travis-ci/autoversion.sh SystemInteract.Local
  - bash travis-ci/autoversion.sh SystemInteract.Remote
  - export EnableNuGetPackageRestore=false
  - cert-sync /etc/ssl/certs/ca-certificates.crt
  - xbuild /p:Configuration=Debug SystemInteract.sln
  - xbuild /p:Configuration=Release SystemInteract.sln
  - travis_retry bash travis-ci/nuget-upload.sh SystemInteract